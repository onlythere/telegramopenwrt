name: Build and Release Telegram OpenWrt Package

on:
  push:
    branches:
      - master
    tags:
      - 'v*'
  workflow_dispatch:
    inputs:
      create_release:
        description: 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ€ĞµĞ»Ğ¸Ğ·?'
        type: boolean
        default: false
      version:
        description: 'Ğ’ĞµÑ€ÑĞ¸Ñ Ğ¿Ğ°ĞºĞµÑ‚Ğ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 1.0.0-1)'
        required: false
        default: '1.0.0-1'

jobs:
  build_package:
    name: Build Package
    runs-on: ubuntu-22.04

    outputs:
      package_file: ${{ steps.build.outputs.package_file }}
      package_version: ${{ steps.build.outputs.version }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set version
        id: version
        run: |
          if [[ "${{ github.ref_type }}" == "tag" ]]; then
            VERSION=${GITHUB_REF#refs/tags/v}
            echo "version=$VERSION" >> $GITHUB_OUTPUT
          elif [[ -n "${{ github.event.inputs.version }}" ]]; then
            echo "version=${{ github.event.inputs.version }}" >> $GITHUB_OUTPUT
          else
            echo "version=1.0.0-1" >> $GITHUB_OUTPUT
          fi

      - name: Create IPK package
        id: build
        run: |
          VERSION="${{ steps.version.outputs.version }}"
          PACKAGE_NAME="telegramopenwrt"
          PACKAGE_FILE="${PACKAGE_NAME}_${VERSION}_all.ipk"
          
          echo "ğŸ”¨ Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ°ĞºĞµÑ‚ $PACKAGE_FILE"
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ğ°ĞºĞµÑ‚Ğ°
          mkdir -p package/data package/control
          
          # ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ² data/
          echo "ğŸ“ ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ñ„Ğ°Ğ¹Ğ»Ñ‹..."
          if [[ -d "etc" ]]; then
            cp -r etc package/data/
            echo "âœ… Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ etc/"
          fi
          
          if [[ -d "sbin" ]]; then
            cp -r sbin package/data/
            echo "âœ… Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ sbin/"
          fi
          
          if [[ -d "usr" ]]; then
            cp -r usr package/data/
            echo "âœ… Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ usr/"
          fi
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ control Ñ„Ğ°Ğ¹Ğ» Ñ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
          cat > package/control/control << EOF
          Package: $PACKAGE_NAME
          Version: $VERSION
          Architecture: all
          Depends: curl, ca-certificates
          Section: utils
          Priority: optional
          Maintainer: onlythere <https://github.com/onlythere>
          Description: Telegram Scripts for OpenWrt
           A comprehensive set of scripts with plugins API written in bash for managing
           and getting information on OpenWrt routers via Telegram bot.
           .
           Features:
           - Full Telegram bot integration
           - Network interface management
           - Firewall rules control  
           - System monitoring and statistics
           - IP Camera integration
           - Proxy management
           - WiFi control
           - Switch ports monitoring
           - Process management
           - Package management via opkg
          EOF
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ postinst script Ğ´Ğ»Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸
          cat > package/control/postinst << 'EOF'
          #!/bin/sh
          echo "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Telegram OpenWrt..."
          
          # Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
          if [[ -f "/etc/init.d/telegram_bot" ]]; then
            /etc/init.d/telegram_bot enable 2>/dev/null || true
            echo "âœ… Ğ¡ĞµÑ€Ğ²Ğ¸Ñ telegram_bot Ğ²ĞºĞ»ÑÑ‡ĞµĞ½"
          fi
          
          if [[ -f "/etc/init.d/lanports" ]]; then
            /etc/init.d/lanports enable 2>/dev/null || true
            echo "âœ… Ğ¡ĞµÑ€Ğ²Ğ¸Ñ lanports Ğ²ĞºĞ»ÑÑ‡ĞµĞ½"
          fi
          
          if [[ -f "/etc/init.d/hosts_scan" ]]; then
            /etc/init.d/hosts_scan enable 2>/dev/null || true
            echo "âœ… Ğ¡ĞµÑ€Ğ²Ğ¸Ñ hosts_scan Ğ²ĞºĞ»ÑÑ‡ĞµĞ½"
          fi
          
          # Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
          chmod +x /sbin/telegram_bot 2>/dev/null || true
          chmod +x /sbin/telebot 2>/dev/null || true
          chmod +x /sbin/telegram_sender 2>/dev/null || true
          
          echo ""
          echo "ğŸ¤– Telegram OpenWrt ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
          echo ""
          echo "Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸:"
          echo "1. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ° Ğ² /etc/config/telegramopenwrt"
          echo "2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ chat_id Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ĞµĞ³Ğ¾ Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³"
          echo "3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹:"
          echo "   /etc/init.d/telegram_bot start"
          echo "   /etc/init.d/lanports start"
          echo ""
          EOF
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ prerm script Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ
          cat > package/control/prerm << 'EOF'
          #!/bin/sh
          echo "ĞÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Telegram OpenWrt..."
          
          /etc/init.d/telegram_bot stop 2>/dev/null || true
          /etc/init.d/lanports stop 2>/dev/null || true
          /etc/init.d/hosts_scan stop 2>/dev/null || true
          
          /etc/init.d/telegram_bot disable 2>/dev/null || true
          /etc/init.d/lanports disable 2>/dev/null || true
          /etc/init.d/hosts_scan disable 2>/dev/null || true
          
          echo "Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹"
          EOF
          
          # Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹
          chmod +x package/control/postinst
          chmod +x package/control/prerm
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ°Ñ€Ñ…Ğ¸Ğ²Ñ‹
          echo "ğŸ“¦ Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ°Ñ€Ñ…Ğ¸Ğ²Ñ‹..."
          cd package
          tar czf ../data.tar.gz data/
          tar czf ../control.tar.gz control/
          echo "2.0" > ../debian-binary
          
          cd ..
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ .ipk Ğ¿Ğ°ĞºĞµÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ ar
          echo "ğŸ”§ Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ IPK Ğ¿Ğ°ĞºĞµÑ‚..."
          ar r "$PACKAGE_FILE" debian-binary control.tar.gz data.tar.gz
          
          # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
          if [[ -f "$PACKAGE_FILE" ]]; then
            echo "âœ… ĞŸĞ°ĞºĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
            echo "ğŸ“Š Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ°ĞºĞµÑ‚Ğµ:"
            ls -lh "$PACKAGE_FILE"
            echo "ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ:"
            ar t "$PACKAGE_FILE"
            echo "package_file=$PACKAGE_FILE" >> $GITHUB_OUTPUT
            echo "version=$VERSION" >> $GITHUB_OUTPUT
          else
            echo "âŒ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ°ĞºĞµÑ‚Ğ°"
            exit 1
          fi

      - name: Test package integrity
        run: |
          PACKAGE_FILE="${{ steps.build.outputs.package_file }}"
          echo "ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚Ğ°..."
          
          # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ğ°ĞºĞµÑ‚Ğ°
          echo "Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ² Ğ¿Ğ°ĞºĞµÑ‚Ğµ:"
          ar t "$PACKAGE_FILE"
          
          # Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ control
          ar x "$PACKAGE_FILE" control.tar.gz
          tar tzf control.tar.gz
          
          # Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ data  
          ar x "$PACKAGE_FILE" data.tar.gz
          echo "Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ¿Ğ°ĞºĞµÑ‚Ğµ:"
          tar tzf data.tar.gz | head -20
          
          echo "âœ… ĞŸĞ°ĞºĞµÑ‚ Ğ¿Ñ€Ğ¾ÑˆĞµĞ» Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºÑƒ Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸"

      - name: Upload package artifact
        uses: actions/upload-artifact@v4
        with:
          name: telegramopenwrt-package-${{ steps.build.outputs.version }}
          path: ${{ steps.build.outputs.package_file }}
          if-no-files-found: error

  create_release:
    name: Create Release
    needs: build_package
    runs-on: ubuntu-22.04
    if: |
      needs.build_package.result == 'success' && (
        startsWith(github.ref, 'refs/tags/v') ||
        github.event.inputs.create_release == 'true'
      )

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download package
        uses: actions/download-artifact@v4
        with:
          name: telegramopenwrt-package-${{ needs.build_package.outputs.package_version }}
          path: ./packages

      - name: Create package repository files
        run: |
          cd packages
          PACKAGE_FILE="${{ needs.build_package.outputs.package_file }}"
          VERSION="${{ needs.build_package.outputs.package_version }}"
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Packages Ğ¸Ğ½Ğ´ĞµĞºÑ Ğ´Ğ»Ñ opkg
          echo "Package: telegramopenwrt" > Packages
          echo "Version: $VERSION" >> Packages
          echo "Depends: curl, ca-certificates" >> Packages
          echo "Section: utils" >> Packages
          echo "Architecture: all" >> Packages
          echo "Installed-Size: $(stat -c%s "$PACKAGE_FILE")" >> Packages
          echo "Filename: $PACKAGE_FILE" >> Packages
          echo "Size: $(stat -c%s "$PACKAGE_FILE")" >> Packages
          echo "SHA256sum: $(sha256sum "$PACKAGE_FILE" | cut -d' ' -f1)" >> Packages
          echo "Description: Telegram Scripts for OpenWrt - Manage and get information on OpenWrt routers via Telegram bot" >> Packages
          echo "" >> Packages
          
          # Ğ¡Ğ¶Ğ¸Ğ¼Ğ°ĞµĞ¼ Ğ¸Ğ½Ğ´ĞµĞºÑ
          gzip -c Packages > Packages.gz
          
          # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ HTML ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
          cat > index.html << 'EOF'
          <!DOCTYPE html>
          <html>
          <head>
              <title>Telegram OpenWrt Scripts Repository</title>
              <style>
                  body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
                  .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                  .code { background-color: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; font-family: monospace; margin: 15px 0; }
                  .feature { margin: 10px 0; }
                  .emoji { font-size: 1.2em; }
                  h1 { color: #2d3748; border-bottom: 3px solid #4299e1; padding-bottom: 10px; }
                  h2 { color: #4299e1; margin-top: 30px; }
                  .highlight { background: #bee3f8; padding: 2px 6px; border-radius: 3px; }
              </style>
          </head>
          <body>
              <div class="container">
                  <h1>ğŸ¤– Telegram OpenWrt Scripts</h1>
                  
                  <p>A comprehensive set of scripts with plugins API written in bash for managing and getting information on OpenWrt routers via Telegram bot.</p>
                  
                  <h2>âœ¨ Features</h2>
                  <div class="feature">ğŸ¤– <strong>Full Telegram bot integration</strong></div>
                  <div class="feature">ğŸ“¡ <strong>Network interface management</strong></div>
                  <div class="feature">ğŸ”¥ <strong>Firewall rules control</strong></div>
                  <div class="feature">ğŸ“Š <strong>System monitoring and statistics</strong></div>
                  <div class="feature">ğŸ“· <strong>IP Camera integration</strong></div>
                  <div class="feature">ğŸŒ <strong>Proxy management</strong></div>
                  <div class="feature">ğŸ“± <strong>WiFi control</strong></div>
                  <div class="feature">ğŸ”Œ <strong>Switch ports monitoring</strong></div>
                  <div class="feature">ğŸ“‹ <strong>Process management</strong></div>
                  <div class="feature">ğŸ“¦ <strong>Package management via opkg</strong></div>
                  
                  <h2>ğŸš€ Quick Installation</h2>
                  <div class="code">echo 'src/gz telegramopenwrt https://github.com/onlythere/telegramopenwrt/releases/latest/download' >> /etc/opkg/customfeeds.conf
          opkg update
          opkg install telegramopenwrt</div>
                  
                  <h2>ğŸ“¥ Manual Installation</h2>
                  <div class="code">wget -O telegramopenwrt_*.ipk https://github.com/onlythere/telegramopenwrt/releases/latest/download/telegramopenwrt_*.ipk
          opkg install telegramopenwrt_*.ipk</div>
                  
                  <h2>âš™ï¸ Configuration</h2>
                  <p>After installation:</p>
                  <ol>
                      <li>Create your bot at <a href="https://t.me/BotFather">@BotFather</a></li>
                      <li>Edit <span class="highlight">/etc/config/telegramopenwrt</span> with your bot token</li>
                      <li>Get your chat ID and add it to config</li>
                      <li>Start the services: <span class="highlight">/etc/init.d/telegram_bot start</span></li>
                  </ol>
                  
                  <h2>ğŸ“‹ Available Packages</h2>
                  <ul>
          EOF
          
          # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Ğ¿Ğ°ĞºĞµÑ‚Ñ‹
          for file in *.ipk; do
            if [[ -f "$file" ]]; then
              echo "                  <li><a href=\"$file\">ğŸ“¦ $file</a></li>" >> index.html
            fi
          done
          
          cat >> index.html << 'EOF'
                  </ul>
                  
                  <h2>ğŸ”— Repository Files</h2>
                  <ul>
                      <li><a href="Packages">ğŸ“„ Packages Index</a></li>
                      <li><a href="Packages.gz">ğŸ“„ Packages Index (compressed)</a></li>
                  </ul>
                  
                  <p><strong>Compatible with:</strong> OpenWrt 23.05+ | All architectures</p>
              </div>
          </body>
          </html>
          EOF

      - name: Get tag name
        id: tag_name
        run: |
          if [[ "${{ github.ref_type }}" == "tag" ]]; then
            echo "tag=${GITHUB_REF#refs/tags/}" >> $GITHUB_OUTPUT
          else
            tag="v${{ needs.build_package.outputs.package_version }}"
            echo "tag=$tag" >> $GITHUB_OUTPUT
          fi

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: ${{ steps.tag_name.outputs.tag }}
          name: "Telegram OpenWrt Scripts ${{ steps.tag_name.outputs.tag }}"
          body: |
            ## ğŸ¤– Telegram OpenWrt Scripts ${{ steps.tag_name.outputs.tag }}
            
            A comprehensive set of scripts with plugins API for managing OpenWrt routers via Telegram bot.
            
            ### âœ¨ What's New
            - Updated package format and build process
            - Improved installation scripts
            - Better error handling and logging
            - Enhanced documentation
            
            ### ğŸš€ Quick Installation
            ```bash
            # Add repository
            echo 'src/gz telegramopenwrt https://github.com/onlythere/telegramopenwrt/releases/latest/download' >> /etc/opkg/customfeeds.conf
            
            # Update and install
            opkg update
            opkg install telegramopenwrt
            ```
            
            ### ğŸ“¥ Manual Installation
            ```bash
            # Download and install directly
            wget -O telegramopenwrt_*.ipk https://github.com/onlythere/telegramopenwrt/releases/latest/download/${{ needs.build_package.outputs.package_file }}
            opkg install telegramopenwrt_*.ipk
            ```
            
            ### âš™ï¸ Post-Installation Setup
            1. **Create your bot:** Visit [@BotFather](https://t.me/BotFather) on Telegram
            2. **Configure:** Edit `/etc/config/telegramopenwrt` with your bot token and chat ID
            3. **Start services:**
               ```bash
               /etc/init.d/telegram_bot start
               /etc/init.d/lanports start
               ```
            4. **Test:** Send `/start` to your bot
            
            ### ğŸ“‹ Features
            - ğŸ¤– Full Telegram bot integration
            - ğŸ“¡ Network interface management  
            - ğŸ”¥ Firewall rules control
            - ğŸ“Š System monitoring and statistics
            - ğŸ“· IP Camera integration
            - ğŸŒ Proxy management
            - ğŸ“± WiFi control
            - ğŸ”Œ Switch ports monitoring
            - ğŸ“‹ Process management
            - ğŸ“¦ Package management via opkg
            
            ### ğŸ”§ Compatibility
            - **OpenWrt:** 23.05+ (tested on 24.10.1)
            - **Architecture:** All (bash scripts)
            - **Dependencies:** curl, ca-certificates
            
            ### ğŸ“– Documentation
            - **Repository:** [GitHub](https://github.com/onlythere/telegramopenwrt)
            - **Web Interface:** [Package Repository](https://onlythere.github.io/telegramopenwrt)
            
            ---
            **Package:** `${{ needs.build_package.outputs.package_file }}`  
            **Size:** $(stat -c%s packages/${{ needs.build_package.outputs.package_file }} | numfmt --to=iec-i)B  
            **SHA256:** $(cd packages && sha256sum ${{ needs.build_package.outputs.package_file }} | cut -d' ' -f1)
          files: |
            packages/*.ipk
            packages/Packages
            packages/Packages.gz
            packages/index.html
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Update repository stats
        run: |
          echo "ğŸ‰ Ğ ĞµĞ»Ğ¸Ğ· ÑĞ¾Ğ·Ğ´Ğ°Ğ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
          echo "ğŸ“¦ ĞŸĞ°ĞºĞµÑ‚: ${{ needs.build_package.outputs.package_file }}"
          echo "ğŸ”— Ğ¡ÑÑ‹Ğ»ĞºĞ°: https://github.com/onlythere/telegramopenwrt/releases/tag/${{ steps.tag_name.outputs.tag }}"
          echo ""
          echo "ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°ĞºĞµÑ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹:"
          echo "opkg install https://github.com/onlythere/telegramopenwrt/releases/latest/download/${{ needs.build_package.outputs.package_file }}"